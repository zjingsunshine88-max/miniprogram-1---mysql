const t=async(t,e={})=>{const o=localStorage.getItem("token");try{const s=await fetch(`https://practice.insightdata.top:8443${t}`,{method:e.method||"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",...o&&{Authorization:`Bearer ${o}`},...e.headers},credentials:"include",...e});if(!s.ok){const t=await s.json().catch(()=>({}));throw new Error(t.message||`HTTP ${s.status}: ${s.statusText}`)}if("blob"===e.responseType)return s.blob();const i=await s.json();if(i.code&&200!==i.code)throw new Error(i.message||"请求失败");return i}catch(s){throw s}},e={login:e=>t("/api/user/admin-login",{method:"POST",body:JSON.stringify(e)}),getStats:()=>t("/api/admin/stats"),getUsers:(e={})=>{const o=new URLSearchParams(e).toString();return t(`/api/user/stats?${o}`)},getQuestions:(e={})=>{const o=new URLSearchParams(e).toString();return t(`/api/question/list?${o}`)},addQuestion:e=>t("/api/question/import",{method:"POST",body:JSON.stringify({questions:[e]})}),updateQuestion:(e,o)=>t(`/api/question/detail/${e}`,{method:"PUT",body:JSON.stringify(o)}),deleteQuestion:e=>t(`/api/question/detail/${e}`,{method:"DELETE"}),batchDeleteQuestions:e=>t("/api/question/batch-delete",{method:"POST",body:JSON.stringify({questionIds:e})}),importQuestions:e=>t("/api/question/import",{method:"POST",body:JSON.stringify({questions:e})}),deleteQuestionBank:e=>t("/api/question/delete-bank",{method:"POST",body:JSON.stringify({subject:e})}),exportQuestionBank:(e,o="excel")=>t(`/api/question-bank/${e}/export?format=${o}`,{method:"GET",responseType:"blob"})};export{e as a};
