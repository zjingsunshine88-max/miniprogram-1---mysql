import{_ as e,r as a,a as l,h as t,c as u,o as s,d as n,w as i,f as o,E as d,k as r,b as c,p,q as v,s as f,F as m,m as y,l as g,g as h,t as _,y as b,z as w,e as k,A as V,v as C,j as x,B as j,x as z,n as U,C as A,D as S}from"./index-CgU9ouN3.js";import{a as B}from"./admin-BEAb72I0.js";const q={class:"questions-page"},O={key:0,class:"bank-list-page"},$={class:"card-header"},E={class:"header-actions"},N={class:"search-section"},Q={class:"bank-grid"},D={class:"bank-info"},J={class:"bank-name"},I={class:"bank-meta"},P={class:"bank-stats"},T={class:"stat-item"},W={class:"stat-item"},G={class:"bank-actions"},K={class:"pagination"},M={key:1,class:"question-list-page"},R={class:"card-header"},F={class:"header-left"},L={class:"bank-title"},H={class:"header-actions"},X={class:"search-section"},Y={class:"pagination"},Z={key:0,class:"question-detail"},ee={key:0,class:"edit-form"},ae={class:"options-editor"},le={class:"image-upload-section"},te={key:1},ue={class:"question-content"},se={key:0},ne={class:"answer-section"},ie={class:"answer"},oe={key:1},de={key:2},re={class:"images-grid"},ce={class:"dialog-footer"},pe={class:"import-section"},ve={class:"upload-section"},fe={key:0,class:"preview-section"},me={class:"dialog-footer"},ye=e({__name:"Questions",setup(e){const ye=a(!1),ge=a([]),he=a([]),_e=a([]),be=a(!1),we=a(!1),ke=a(!1),Ve=a(null),Ce=a(null),xe=a(!1),je=a(!1),ze=a([]),Ue=a(!1),Ae=a({id:"",subject:"",chapter:"",type:"",difficulty:"",content:"",options:[],answer:"",analysis:"",images:[]}),Se=a("https://practice.insightdata.top/api/upload/image"),Be=a({Authorization:`Bearer ${localStorage.getItem("token")}`}),qe=l({keyword:"",subject:"",type:"",difficulty:""}),Oe=l({page:1,limit:20,total:0}),$e=a([]),Ee=e=>({single:"单选题",multiple:"多选题",judge:"判断题"}[e]||e),Ne=e=>({single:"primary",multiple:"success",judge:"warning"}[e]||"info"),Qe=e=>({"简单":"success","中等":"warning","困难":"danger"}[e]||"info"),De=e=>({"数学":"primary","语文":"success","英语":"warning","物理":"danger","化学":"info","生物":"success","历史":"warning","地理":"primary","政治":"danger","计算机":"info"}[e]||"info"),Je=e=>e?new Date(e).toLocaleString("zh-CN"):"-",Ie=async()=>{ye.value=!0;try{const e={page:Oe.page,limit:Oe.limit,...qe};Object.keys(e).forEach(a=>{""===e[a]&&delete e[a]});const a=await B.getQuestions(e);if(200===a.code){const e=new Map;a.data.list.forEach(a=>{const l=a.subject;e.has(l)||e.set(l,{id:l,name:a.subject,difficulty:a.difficulty,questionCount:0,createdAt:a.createdAt}),e.get(l).questionCount++}),he.value=Array.from(e.values()),Oe.total=he.value.length;const l=[...new Set(he.value.map(e=>e.name))];$e.value=l.filter(e=>e)}else d.error(a.message||"获取科目列表失败")}catch(e){d.error("加载科目列表失败: "+e.message)}finally{ye.value=!1}},Pe=async()=>{if(Ce.value){ye.value=!0;try{const e={page:Oe.page,limit:Oe.limit,subject:Ce.value.name,...qe};Object.keys(e).forEach(a=>{""===e[a]&&delete e[a]});const a=await B.getQuestions(e);200===a.code?(ge.value=a.data.list||[],Oe.total=a.data.total||0):d.error(a.message||"获取题目列表失败")}catch(e){d.error("加载题目列表失败: "+e.message)}finally{ye.value=!1}}},Te=()=>{Oe.page=1,Ce.value?Pe():Ie()},We=()=>{Object.keys(qe).forEach(e=>{qe[e]=""}),Oe.page=1,Ce.value?Pe():Ie()},Ge=e=>{Oe.limit=e,Oe.page=1,Ce.value?Pe():Ie()},Ke=e=>{Oe.page=e,Ce.value?Pe():Ie()},Me=e=>{_e.value=e},Re=e=>{Ce.value=e,Oe.page=1,Pe()},Fe=()=>{Ce.value=null,Oe.page=1,Ie()},Le=()=>{Ve.value&&(Ae.value={id:Ve.value.id,subject:Ve.value.subject,chapter:Ve.value.chapter||"",type:Ve.value.type,difficulty:Ve.value.difficulty||"简单",content:Ve.value.content,options:He(Ve.value.options),answer:Ve.value.answer,analysis:Ve.value.analysis||"",images:Xe(Ve.value.images)},xe.value=!0)},He=e=>{if(!e)return[];try{if("string"==typeof e){const a=JSON.parse(e);if(Array.isArray(a))return a.map(e=>({content:"string"==typeof e?e:e.content||""}))}return Array.isArray(e)?e.map(e=>({content:"string"==typeof e?e:e.content||""})):[]}catch(a){return[]}},Xe=e=>{if(!e)return[];try{if("string"==typeof e){const a=JSON.parse(e);if(Array.isArray(a))return a.map(e=>({name:e.name||"image",url:Ye(e.path||e),path:e.path||e}))}return Array.isArray(e)?e.map(e=>({name:e.name||"image",url:Ye(e.path||e),path:e.path||e})):[]}catch(a){return[]}},Ye=e=>e&&"string"==typeof e?e.startsWith("http")?e:`https://practice.insightdata.top/uploads/${e}`:"",Ze=()=>{if(!Ve.value?.images)return[];try{return("string"==typeof Ve.value.images?JSON.parse(Ve.value.images):Ve.value.images).filter(e=>e&&"object"==typeof e&&e.path&&"string"==typeof e.path).map(e=>Ye(e.path))}catch(e){return[]}},ea=()=>{Ae.value.options.length<6&&Ae.value.options.push({content:""})},aa=async()=>{if(Ae.value.content.trim())if(Ae.value.options.length<2)d.error("至少需要2个选项");else if(Ae.value.answer.trim()){je.value=!0;try{const e={chapter:Ae.value.chapter,type:Ae.value.type,difficulty:Ae.value.difficulty,content:Ae.value.content,options:JSON.stringify(Ae.value.options.map(e=>e.content)),answer:Ae.value.answer,analysis:Ae.value.analysis,images:JSON.stringify(Ae.value.images.map(e=>({path:e.path})))},a=await B.updateQuestion(Ae.value.id,e);200===a.code?(d.success("保存成功"),xe.value=!1,be.value=!1,Pe()):d.error(a.message||"保存失败")}catch(e){d.error("保存失败: "+e.message)}finally{je.value=!1}}else d.error("请输入正确答案");else d.error("请输入题目内容")},la=(e,a,l)=>{200===e.code?(Ae.value.images.push({name:a.name,url:e.data.url,path:e.data.path}),d.success("图片上传成功")):d.error(e.message||"图片上传失败")},ta=(e,a,l)=>{d.error("图片上传失败")},ua=e=>{const a=e.type.startsWith("image/"),l=e.size/1024/1024<2;return a?!!l||(d.error("图片大小不能超过 2MB!"),!1):(d.error("只能上传图片文件!"),!1)},sa=e=>{},na=e=>{const a="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type,l="text/csv"===e.type||e.name.endsWith(".csv");return!(!a&&!l)||(d.error("只能上传 Excel 或 CSV 文件!"),!1)},ia=async()=>{if(0!==ze.value.length){Ue.value=!0;try{const e=await B.importQuestions(ze.value);200===e.code?(d.success(`成功导入 ${ze.value.length} 条题目`),ke.value=!1,ze.value=[],Pe()):d.error(e.message||"导入失败")}catch(e){d.error("导入失败: "+e.message)}finally{Ue.value=!1}}else d.warning("请先选择要导入的文件")};return t(()=>{Ie()}),(e,a)=>{const l=o("el-icon"),t=o("el-button"),_e=o("el-input"),He=o("el-col"),Xe=o("el-option"),oa=o("el-select"),da=o("el-row"),ra=o("el-tag"),ca=o("el-card"),pa=o("el-pagination"),va=o("el-table-column"),fa=o("el-table"),ma=o("el-form-item"),ya=o("el-upload"),ga=o("el-form"),ha=o("el-descriptions-item"),_a=o("el-descriptions"),ba=o("el-image"),wa=o("el-dialog"),ka=o("el-alert"),Va=r("loading");return s(),u("div",q,[Ce.value?(s(),u("div",M,[n(ca,null,{header:i(()=>[c("div",R,[c("div",F,[n(t,{onClick:Fe,type:"text"},{default:i(()=>[n(l,null,{default:i(()=>[n(v(j))]),_:1}),a[30]||(a[30]=h(" 返回科目列表 ",-1))]),_:1}),c("span",L,_(Ce.value.name),1)]),c("div",H,[n(t,{type:"primary",onClick:a[6]||(a[6]=e=>we.value=!0)},{default:i(()=>[n(l,null,{default:i(()=>[n(v(z))]),_:1}),a[31]||(a[31]=h(" 添加题目 ",-1))]),_:1}),n(t,{onClick:Pe},{default:i(()=>[n(l,null,{default:i(()=>[n(v(C))]),_:1}),a[32]||(a[32]=h(" 刷新 ",-1))]),_:1})])])]),default:i(()=>[c("div",X,[n(da,{gutter:20},{default:i(()=>[n(He,{span:6},{default:i(()=>[n(_e,{modelValue:qe.keyword,"onUpdate:modelValue":a[7]||(a[7]=e=>qe.keyword=e),placeholder:"搜索题目内容",clearable:"",onKeyup:p(Te,["enter"])},{prefix:i(()=>[n(l,null,{default:i(()=>[n(v(f))]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(He,{span:4},{default:i(()=>[n(oa,{modelValue:qe.type,"onUpdate:modelValue":a[8]||(a[8]=e=>qe.type=e),placeholder:"题目类型",clearable:""},{default:i(()=>[n(Xe,{label:"全部类型",value:""}),n(Xe,{label:"单选题",value:"single"}),n(Xe,{label:"多选题",value:"multiple"}),n(Xe,{label:"判断题",value:"judge"})]),_:1},8,["modelValue"])]),_:1}),n(He,{span:6},{default:i(()=>[n(t,{type:"primary",onClick:Te},{default:i(()=>[...a[33]||(a[33]=[h("搜索",-1)])]),_:1}),n(t,{onClick:We},{default:i(()=>[...a[34]||(a[34]=[h("重置",-1)])]),_:1})]),_:1})]),_:1})]),x((s(),g(fa,{data:ge.value,stripe:"",style:{width:"100%"},onSelectionChange:Me},{default:i(()=>[n(va,{type:"selection",width:"55"}),n(va,{prop:"id",label:"ID",width:"80"}),n(va,{prop:"type",label:"类型",width:"100"},{default:i(({row:e})=>[n(ra,{type:Ne(e.type)},{default:i(()=>[h(_(Ee(e.type)),1)]),_:2},1032,["type"])]),_:1}),n(va,{prop:"content",label:"题目内容","min-width":"300","show-overflow-tooltip":""}),n(va,{prop:"answer",label:"答案",width:"100"}),n(va,{prop:"createdAt",label:"创建时间",width:"180"},{default:i(({row:e})=>[h(_(Je(e.createdAt)),1)]),_:1}),n(va,{label:"操作",width:"200",fixed:"right"},{default:i(({row:e})=>[n(t,{size:"small",onClick:a=>{return l=e,Ve.value=l,be.value=!0,void Le();var l}},{default:i(()=>[...a[35]||(a[35]=[h("编辑",-1)])]),_:1},8,["onClick"]),n(t,{size:"small",type:"danger",onClick:a=>(async e=>{try{await S.confirm(`确定要删除题目"${e.content.substring(0,50)}..."吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=await B.deleteQuestion(e.id);200===a.code?(d.success("删除成功"),Pe()):d.error(a.message||"删除失败")}catch(a){"cancel"!==a&&d.error("删除失败: "+a.message)}})(e)},{default:i(()=>[...a[36]||(a[36]=[h("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Va,ye.value]]),c("div",Y,[n(pa,{"current-page":Oe.page,"onUpdate:currentPage":a[9]||(a[9]=e=>Oe.page=e),"page-size":Oe.limit,"onUpdate:pageSize":a[10]||(a[10]=e=>Oe.limit=e),"page-sizes":[10,20,50,100],total:Oe.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ge,onCurrentChange:Ke},null,8,["current-page","page-size","total"])])]),_:1})])):(s(),u("div",O,[n(ca,null,{header:i(()=>[c("div",$,[a[25]||(a[25]=c("span",null,"科目管理",-1)),c("div",E,[n(t,{type:"primary",onClick:a[0]||(a[0]=a=>e.$router.push("/question-import"))},{default:i(()=>[n(l,null,{default:i(()=>[n(v(V))]),_:1}),a[23]||(a[23]=h(" 导入题目 ",-1))]),_:1}),n(t,{onClick:Ie},{default:i(()=>[n(l,null,{default:i(()=>[n(v(C))]),_:1}),a[24]||(a[24]=h(" 刷新 ",-1))]),_:1})])])]),default:i(()=>[c("div",N,[n(da,{gutter:20},{default:i(()=>[n(He,{span:6},{default:i(()=>[n(_e,{modelValue:qe.keyword,"onUpdate:modelValue":a[1]||(a[1]=e=>qe.keyword=e),placeholder:"搜索科目名称",clearable:"",onKeyup:p(Te,["enter"])},{prefix:i(()=>[n(l,null,{default:i(()=>[n(v(f))]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(He,{span:4},{default:i(()=>[n(oa,{modelValue:qe.subject,"onUpdate:modelValue":a[2]||(a[2]=e=>qe.subject=e),placeholder:"选择科目",clearable:""},{default:i(()=>[n(Xe,{label:"全部科目",value:""}),(s(!0),u(m,null,y($e.value,e=>(s(),g(Xe,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(He,{span:4},{default:i(()=>[n(oa,{modelValue:qe.difficulty,"onUpdate:modelValue":a[3]||(a[3]=e=>qe.difficulty=e),placeholder:"难度",clearable:""},{default:i(()=>[n(Xe,{label:"全部难度",value:""}),n(Xe,{label:"简单",value:"简单"}),n(Xe,{label:"中等",value:"中等"}),n(Xe,{label:"困难",value:"困难"})]),_:1},8,["modelValue"])]),_:1}),n(He,{span:6},{default:i(()=>[n(t,{type:"primary",onClick:Te},{default:i(()=>[...a[26]||(a[26]=[h("搜索",-1)])]),_:1}),n(t,{onClick:We},{default:i(()=>[...a[27]||(a[27]=[h("重置",-1)])]),_:1})]),_:1})]),_:1})]),c("div",Q,[(s(!0),u(m,null,y(he.value,e=>(s(),g(ca,{key:e.id,class:"bank-card",shadow:"hover",onClick:a=>Re(e)},{default:i(()=>[c("div",D,[c("h3",J,_(e.name),1),c("div",I,[n(ra,{type:De(e.name)},{default:i(()=>[h(_(e.name),1)]),_:2},1032,["type"]),n(ra,{type:Qe(e.difficulty)},{default:i(()=>[h(_(e.difficulty),1)]),_:2},1032,["type"])]),c("div",P,[c("span",T,[n(l,null,{default:i(()=>[n(v(b))]),_:1}),h(" "+_(e.questionCount||0)+" 题 ",1)]),c("span",W,[n(l,null,{default:i(()=>[n(v(w))]),_:1}),h(" "+_(Je(e.createdAt)),1)])])]),c("div",G,[n(t,{size:"small",type:"primary",onClick:k(a=>Re(e),["stop"])},{default:i(()=>[...a[28]||(a[28]=[h(" 进入科目 ",-1)])]),_:1},8,["onClick"]),n(t,{size:"small",type:"danger",onClick:k(a=>(async e=>{try{await S.confirm(`确定要删除科目"${e.name}"的所有题目吗？这将删除该科目下的所有题目。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const a=await B.deleteQuestionBank(e.name);200===a.code?(d.success(`删除成功，共删除 ${a.data.deletedCount} 道题目`),Ie()):d.error(a.message||"删除失败")}catch(a){"cancel"!==a&&d.error("删除失败: "+a.message)}})(e),["stop"])},{default:i(()=>[...a[29]||(a[29]=[h(" 删除 ",-1)])]),_:1},8,["onClick"])])]),_:2},1032,["onClick"]))),128))]),c("div",K,[n(pa,{"current-page":Oe.page,"onUpdate:currentPage":a[4]||(a[4]=e=>Oe.page=e),"page-size":Oe.limit,"onUpdate:pageSize":a[5]||(a[5]=e=>Oe.limit=e),"page-sizes":[12,24,48],total:Oe.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ge,onCurrentChange:Ke},null,8,["current-page","page-size","total"])])]),_:1})])),n(wa,{modelValue:be.value,"onUpdate:modelValue":a[20]||(a[20]=e=>be.value=e),title:xe.value?"编辑题目":"题目详情",width:"900px","close-on-click-modal":!1},{footer:i(()=>[c("div",ce,[n(t,{onClick:a[19]||(a[19]=e=>be.value=!1)},{default:i(()=>[...a[45]||(a[45]=[h("取消",-1)])]),_:1}),xe.value?(s(),g(t,{key:0,type:"primary",loading:je.value,onClick:aa},{default:i(()=>[...a[46]||(a[46]=[h(" 保存 ",-1)])]),_:1},8,["loading"])):(s(),g(t,{key:1,type:"primary",onClick:Le},{default:i(()=>[...a[47]||(a[47]=[h("编辑",-1)])]),_:1}))])]),default:i(()=>[Ve.value?(s(),u("div",Z,[xe.value?(s(),u("div",ee,[n(ga,{model:Ae.value,"label-width":"100px","label-position":"left"},{default:i(()=>[n(da,{gutter:20},{default:i(()=>[n(He,{span:12},{default:i(()=>[n(ma,{label:"题目ID"},{default:i(()=>[n(_e,{modelValue:Ae.value.id,"onUpdate:modelValue":a[11]||(a[11]=e=>Ae.value.id=e),disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),n(He,{span:12},{default:i(()=>[n(ma,{label:"科目"},{default:i(()=>[n(_e,{modelValue:Ae.value.subject,"onUpdate:modelValue":a[12]||(a[12]=e=>Ae.value.subject=e),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(da,{gutter:20},{default:i(()=>[n(He,{span:12},{default:i(()=>[n(ma,{label:"章节"},{default:i(()=>[n(_e,{modelValue:Ae.value.chapter,"onUpdate:modelValue":a[13]||(a[13]=e=>Ae.value.chapter=e)},null,8,["modelValue"])]),_:1})]),_:1}),n(He,{span:12},{default:i(()=>[n(ma,{label:"类型"},{default:i(()=>[n(oa,{modelValue:Ae.value.type,"onUpdate:modelValue":a[14]||(a[14]=e=>Ae.value.type=e),style:{width:"100%"}},{default:i(()=>[n(Xe,{label:"单选题",value:"单选题"}),n(Xe,{label:"多选题",value:"多选题"}),n(Xe,{label:"判断题",value:"判断题"}),n(Xe,{label:"填空题",value:"填空题"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(da,{gutter:20},{default:i(()=>[n(He,{span:12},{default:i(()=>[n(ma,{label:"难度"},{default:i(()=>[n(oa,{modelValue:Ae.value.difficulty,"onUpdate:modelValue":a[15]||(a[15]=e=>Ae.value.difficulty=e),style:{width:"100%"}},{default:i(()=>[n(Xe,{label:"简单",value:"简单"}),n(Xe,{label:"中等",value:"中等"}),n(Xe,{label:"困难",value:"困难"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(He,{span:12},{default:i(()=>[n(ma,{label:"正确答案"},{default:i(()=>[n(_e,{modelValue:Ae.value.answer,"onUpdate:modelValue":a[16]||(a[16]=e=>Ae.value.answer=e),placeholder:"如：A、AB、正确等"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n(ma,{label:"题目内容"},{default:i(()=>[n(_e,{modelValue:Ae.value.content,"onUpdate:modelValue":a[17]||(a[17]=e=>Ae.value.content=e),type:"textarea",rows:4,placeholder:"请输入题目内容"},null,8,["modelValue"])]),_:1}),n(ma,{label:"选项"},{default:i(()=>[c("div",ae,[(s(!0),u(m,null,y(Ae.value.options,(e,l)=>(s(),u("div",{key:l,class:"option-item"},[n(_e,{modelValue:Ae.value.options[l].content,"onUpdate:modelValue":e=>Ae.value.options[l].content=e,placeholder:`选项 ${String.fromCharCode(65+l)}`},{prepend:i(()=>[h(_(String.fromCharCode(65+l))+".",1)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"]),Ae.value.options.length>2?(s(),g(t,{key:0,type:"danger",size:"small",onClick:e=>(e=>{Ae.value.options.length>2&&Ae.value.options.splice(e,1)})(l)},{default:i(()=>[...a[37]||(a[37]=[h(" 删除 ",-1)])]),_:1},8,["onClick"])):U("",!0)]))),128)),Ae.value.options.length<6?(s(),g(t,{key:0,type:"primary",size:"small",onClick:ea},{default:i(()=>[...a[38]||(a[38]=[h(" 添加选项 ",-1)])]),_:1})):U("",!0)])]),_:1}),n(ma,{label:"解析"},{default:i(()=>[n(_e,{modelValue:Ae.value.analysis,"onUpdate:modelValue":a[18]||(a[18]=e=>Ae.value.analysis=e),type:"textarea",rows:3,placeholder:"请输入题目解析"},null,8,["modelValue"])]),_:1}),n(ma,{label:"解析图片"},{default:i(()=>[c("div",le,[n(ya,{ref:"imageUploadRef",action:Se.value,headers:Be.value,"on-success":la,"on-error":ta,"before-upload":ua,"file-list":Ae.value.images,"list-type":"picture-card",limit:5,accept:"image/*"},{default:i(()=>[n(l,null,{default:i(()=>[n(v(z))]),_:1})]),_:1},8,["action","headers","file-list"]),a[39]||(a[39]=c("div",{class:"upload-tip"}," 支持上传JPG、PNG格式图片，最多5张 ",-1))])]),_:1})]),_:1},8,["model"])])):(s(),u("div",te,[n(_a,{column:2,border:""},{default:i(()=>[n(ha,{label:"题目ID"},{default:i(()=>[h(_(Ve.value.id),1)]),_:1}),n(ha,{label:"科目"},{default:i(()=>[h(_(Ve.value.subject),1)]),_:1}),n(ha,{label:"章节"},{default:i(()=>[h(_(Ve.value.chapter),1)]),_:1}),n(ha,{label:"类型"},{default:i(()=>[n(ra,{type:Ne(Ve.value.type)},{default:i(()=>[h(_(Ee(Ve.value.type)),1)]),_:1},8,["type"])]),_:1}),n(ha,{label:"难度"},{default:i(()=>[n(ra,{type:Qe(Ve.value.difficulty)},{default:i(()=>[h(_(Ve.value.difficulty),1)]),_:1},8,["type"])]),_:1}),n(ha,{label:"创建时间"},{default:i(()=>[h(_(Je(Ve.value.createdAt)),1)]),_:1})]),_:1}),c("div",ue,[a[44]||(a[44]=c("h4",null,"题目内容：",-1)),c("p",null,_(Ve.value.content),1),Ve.value.options&&Ve.value.options.length>0?(s(),u("div",se,[a[40]||(a[40]=c("h4",null,"选项：",-1)),c("ul",null,[(s(!0),u(m,null,y(Ve.value.options,(e,a)=>(s(),u("li",{key:a},_(String.fromCharCode(65+a))+". "+_(e.content||e),1))),128))])])):U("",!0),c("div",ne,[a[41]||(a[41]=c("h4",null,"正确答案：",-1)),c("p",ie,_(Ve.value.answer),1)]),Ve.value.analysis?(s(),u("div",oe,[a[42]||(a[42]=c("h4",null,"解析：",-1)),c("p",null,_(Ve.value.analysis),1)])):U("",!0),Ve.value.images&&Ve.value.images.length>0?(s(),u("div",de,[a[43]||(a[43]=c("h4",null,"解析图片：",-1)),c("div",re,[(s(!0),u(m,null,y(Ve.value.images,(e,a)=>(s(),g(ba,{key:a,src:Ye(e.path),"preview-src-list":Ze(),fit:"cover",class:"analysis-image"},null,8,["src","preview-src-list"]))),128))])])):U("",!0)])]))])):U("",!0)]),_:1},8,["modelValue","title"]),n(wa,{modelValue:ke.value,"onUpdate:modelValue":a[22]||(a[22]=e=>ke.value=e),title:"导入题目",width:"600px","close-on-click-modal":!1},{footer:i(()=>[c("div",me,[n(t,{onClick:a[21]||(a[21]=e=>ke.value=!1)},{default:i(()=>[...a[52]||(a[52]=[h("取消",-1)])]),_:1}),n(t,{type:"primary",loading:Ue.value,disabled:0===ze.value.length,onClick:ia},{default:i(()=>[h(" 确认导入 ("+_(ze.value.length)+" 条) ",1)]),_:1},8,["loading","disabled"])])]),default:i(()=>[c("div",pe,[n(ka,{title:"导入说明",type:"info",closable:!1,"show-icon":""},{default:i(()=>[...a[48]||(a[48]=[c("p",null,"支持导入Excel文件(.xlsx)或CSV文件(.csv)",-1),c("p",null,"文件格式要求：",-1),c("ul",null,[c("li",null,"第一行：科目,章节,类型,内容,选项A,选项B,选项C,选项D,正确答案,解析,难度"),c("li",null,"类型：single(单选), multiple(多选), judge(判断)"),c("li",null,"难度：简单, 中等, 困难")],-1)])]),_:1}),c("div",ve,[n(ya,{ref:"uploadRef","auto-upload":!1,"on-change":sa,"before-upload":na,accept:".xlsx,.csv",drag:""},{tip:i(()=>[...a[49]||(a[49]=[c("div",{class:"el-upload__tip"}," 只能上传 xlsx/csv 文件 ",-1)])]),default:i(()=>[n(l,{class:"el-icon--upload"},{default:i(()=>[n(v(A))]),_:1}),a[50]||(a[50]=c("div",{class:"el-upload__text"},[h(" 将文件拖到此处，或"),c("em",null,"点击上传")],-1))]),_:1},512)]),ze.value.length>0?(s(),u("div",fe,[a[51]||(a[51]=c("h4",null,"预览数据 (前5条)：",-1)),n(fa,{data:ze.value.slice(0,5),size:"small","max-height":"200"},{default:i(()=>[n(va,{prop:"subject",label:"科目",width:"80"}),n(va,{prop:"chapter",label:"章节",width:"100"}),n(va,{prop:"type",label:"类型",width:"80"}),n(va,{prop:"content",label:"内容","show-overflow-tooltip":""}),n(va,{prop:"answer",label:"答案",width:"80"})]),_:1},8,["data"])])):U("",!0)])]),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-681cd78d"]]);export{ye as default};
