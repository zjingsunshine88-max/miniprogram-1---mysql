import{_ as e,r as a,a as s,c as l,o as r,b as o,d as n,w as u,e as t,f as d,u as i,g as m,E as p}from"./index-BJY68SI-.js";import{a as g}from"./admin-LlGWaIZt.js";const c={class:"login-container"},f={class:"login-box"},w=e({__name:"Login",setup(e){const w=i(),v=a(null),_=a(!1),b=s({username:"",password:""}),h={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},y=async()=>{if(v.value)try{await v.value.validate(),_.value=!0;const e=await g.login({username:b.username,password:b.password});localStorage.setItem("token",e.data.token),localStorage.setItem("userInfo",JSON.stringify(e.data.user)),p.success("登录成功"),w.push("/dashboard")}catch(e){p.error(e.message||"登录失败")}finally{_.value=!1}};return(e,a)=>{const s=d("el-input"),i=d("el-form-item"),p=d("el-button"),g=d("el-form");return r(),l("div",c,[o("div",f,[a[3]||(a[3]=o("div",{class:"login-header"},[o("h2",null,"刷题小程序管理系统"),o("p",null,"管理员登录")],-1)),n(g,{ref_key:"loginFormRef",ref:v,model:b,rules:h,class:"login-form",onSubmit:t(y,["prevent"])},{default:u(()=>[n(i,{prop:"username"},{default:u(()=>[n(s,{modelValue:b.username,"onUpdate:modelValue":a[0]||(a[0]=e=>b.username=e),placeholder:"请输入用户名","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),n(i,{prop:"password"},{default:u(()=>[n(s,{modelValue:b.password,"onUpdate:modelValue":a[1]||(a[1]=e=>b.password=e),type:"password",placeholder:"请输入密码","prefix-icon":"Lock",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),n(i,null,{default:u(()=>[n(p,{type:"primary",size:"large",class:"login-btn",loading:_.value,onClick:y},{default:u(()=>[...a[2]||(a[2]=[m(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a[4]||(a[4]=o("div",{class:"login-tips"},[o("p",null,"默认管理员账户："),o("p",null,"用户名：admin"),o("p",null,"密码：123456")],-1))])])}}},[["__scopeId","data-v-1a834129"]]);export{w as default};
